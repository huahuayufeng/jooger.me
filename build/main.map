{"version":3,"sources":["webpack:///webpack/bootstrap bec769d5149f5f044ce9","webpack:///external \"axios\"","webpack:///./nuxt.config.js","webpack:///./server/routes.js","webpack:///external \"koa\"","webpack:///external \"koa-router\"","webpack:///external \"nuxt\"","webpack:///./client/config/index.js","webpack:///./client/service/index.js","webpack:///./posts.config.js","webpack:///./server/controllers.js","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///external \"regenerator-runtime\"","webpack:///./server/index.js"],"names":["isProd","module","exports","srcDir","cache","max","maxAge","dev","head","title","titleTemplate","meta","charset","content","name","hid","link","rel","type","href","css","src","lang","loading","color","build","vendor","plugins","ssr","router","linkActiveClass","use","ctx","next","response","set","get","service","url","method","baseURL","headers","withCredentials","timeout","responseType","proxy","host","port","process","env","PORT","logMsg","msg","console","info","fetcher","Axios","create","config","CODE","FAILED","SUCCESS","UNAUTHORIZED","interceptors","request","Promise","reject","err","data","code","message","toLocaleUpperCase","success","status","error","wrap","article","fetchList","repo","owner","clientId","clientSecret","imageReg","postController","query","page","per_page","axios","params","filter","state","sort","direction","client_id","client_secret","catch","res","log","prev","includes","articles","map","item","body","articleParser","list","pagination","splits","split","thumb","cap","exec","app","HOST","require","nuxt","builder","e","exit","resolve","on","render","req","promise","then","routes","allowedMethods","listen"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bec769d5149f5f044ce9","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 0\n// module chunks = 0","const isProd = process.env.NODE_ENV === 'production'\n\nmodule.exports = {\n  srcDir: 'client/',\n  cache: {\n    max: 20,\n    maxAge: 600000\n  },\n  dev: !isProd,\n  head: {\n    title: 'Jooger.me - Jooger jooger, chicken dinner',\n    titleTemplate: '%s - Jooger.me',\n    meta: [\n      { charset: 'utf-8' },\n      { 'http-equiv': 'X-UA-Compatible', content: 'IE=edge' },\n      { 'http-equiv': 'Cache-Control', content: 'no-transform' },\n      { 'http-equiv': 'Cache-Control', content: 'no-siteapp' },\n      { 'http-equiv': 'cleartype', content: 'on' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1.0, user-scalable=no' },\n      { name: 'MobileOptimized', content: '320' },\n      { name: 'HandheldFriendly', content: 'True' },\n      { name: 'apple-mobile-web-app-capable', content: 'yes' },\n      { name: 'author', content: 'zzy1198258955@163.com' },\n      { hid: 'keywords', name: 'keywords', content: 'Jooger,Jooger.me,Blog,FE,前端技术开发' },\n      { hid: 'description', name: 'description', content: 'Jooger jooger, chicken dinner' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },\n      { rel: 'stylesheet', href: '//at.alicdn.com/t/font_268993_tu4k21igcspgmn29.css' }\n    ]\n  },\n  css: [\n    'normalize.css',\n    'swiper/dist/css/swiper.css',\n    { src: '~assets/stylus/index.styl', lang: 'stylus' }\n  ],\n  // loading: '~/components/Common/PageLoading',\n  loading: { color: '#2196f3' },\n  build: {\n    vendor: [\n      'axios',\n      'bezier-easing',\n      'highlight.js',\n      'marked'\n    ]\n  },\n  plugins: [\n    { src: '~plugins/router.js', ssr: false },\n    { src: '~plugins/filter.js' },\n    { src: '~plugins/swiper.js', ssr: false },\n    { src: '~plugins/image.js', ssr: false }\n  ],\n  router: {\n    linkActiveClass: 'active'\n  }\n  // transition: {\n  //   name: 'fade',\n  //   mode: 'out-in'\n  // }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","/**\n * @desc server routes\n * @author Jooger <zzy1198258955@163.com>\n * @date 15 Sep 2017\n */\n\nimport { postController } from './controllers'\n\nexport default router => {\n  router.use('*', (ctx, next) => {\n    ctx.response.set('Content-Type', 'application/json;charset=utf-8')\n    return next()\n  })\n  router.get('articles', '/api/articles', postController)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 5\n// module chunks = 0","/**\n * @desc App Config\n * @author Jooger <zzy1198258955@163.com>\n * @date 8 Sep 2017\n */\n\n// const isProd = process.env.NODE_ENV === 'production'\n\nexport default {\n  service: {\n    url: '/',\n    method: 'get',\n    baseURL: '/api',\n    // baseURL: isProd ? 'http://api.jooger.me/v1.0' : 'http://localhost:5000/v1.0',\n    // baseURL: process.env.baseUrl,\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest'\n    },\n    withCredentials: true,\n    timeout: 120000,\n    responseType: 'json',\n    proxy: {\n      host: '127.0.0.1',\n      port: process.env.PORT || 3000\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/config/index.js","/**\n * @desc Api service\n * @author Jooger <zzy1198258955@163.com>\n * @date 8 Sep 2017\n */\n\nimport Axios from 'axios'\nimport config from '../config'\n\nconst logMsg = (msg = '', type = 'success') => {\n  if (msg) {\n    console.info(msg)\n  }\n}\n\nexport const fetcher = Axios.create(config.service)\n\nexport const CODE = {\n  FAILED: -1,\n  SUCCESS: 0,\n  UNAUTHORIZED: 401\n}\n\nfetcher.interceptors.request.use(config => {\n  return config\n}, err => {\n  return Promise.reject(err)\n})\n\nfetcher.interceptors.response.use(response => {\n  if (!response || !response.data) {\n    return logMsg('服务器异常', 'error')\n  }\n  switch (response.data.code) {\n    case CODE.UNAUTHORIZED:\n      logMsg(response.data.message, 'error')\n      break\n    case CODE.FAILED:\n      logMsg(response.data.message, 'error')\n      break\n    case CODE.SUCCESS:\n      if (response.config.method.toLocaleUpperCase() !== 'GET') {\n        logMsg(response.data.message)\n      }\n      break\n    default:\n      break\n  }\n  return {\n    success: response.data && response.data.code === CODE.SUCCESS,\n    ...response.data\n  }\n}, error => {\n  const status = error.response && error.response.status || error.code\n  const message = error.message ? error.message : `请求错误${status ? `，code:${status}` : ''}`\n  logMsg(message, 'error')\n  return error.response || {\n    code: CODE.FAILED,\n    message\n  }\n})\n\nconst wrap = (url, type = 'get') => (config = {}) => fetcher.request({ ...config, method: type, url })\n\nexport default {\n  article: {\n    fetchList: wrap('/articles')\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/service/index.js","/**\n * @desc posts config\n * @author Jooger <zzy1198258955@163.com>\n * @date 15 Sep 2017\n */\n\nexport default {\n  repo: 'git-hook-test',\n  owner: 'jo0ger',\n  clientId: 'b4983366c4c7549a09f1',\n  clientSecret: '76fd8c26a21659d7eb925af0ed3498eabed49277'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./posts.config.js","/**\n * @desc server controllers\n * @author Jooger <zzy1198258955@163.com>\n * @date 15 Sep 2017\n */\n\nimport axios from 'axios'\n// import fm from 'front-matter'\nimport config from '../posts.config'\nimport { CODE } from '../client/service'\nconst imageReg = /^!\\[((?:\\[[^\\]]*\\]|[^[\\]]|\\](?=[^[]*\\]))*)\\]\\(\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*\\)/\n\nexport const postController = async (ctx, next) => {\n  const { page, per_page = 12 } = ctx.query\n  const res = await axios.get(`https://api.github.com/repos/${config.owner}/${config.repo}/issues`, {\n    params: {\n      filter: 'created',\n      state: 'open',\n      sort: 'created',\n      direction: 'desc',\n      client_id: config.clientId,\n      client_secret: config.clientSecret,\n      page,\n      per_page\n    }\n  }).catch(err => console.error(err))\n\n  if (res) {\n    const link = res.headers.link || ''\n    console.log(res.headers, link)\n    let prev = link.includes('rel=\"prev\"')\n    let next = link.includes('rel=\"next\"')\n    const articles = res.data.map(item => {\n      item.body = articleParser(item.body)\n      return item\n    })\n    // ctx.response.set('Accept', 'application/vnd.github.squirrel-girl-preview')\n    ctx.status = res.status\n    ctx.body = {\n      code: CODE.SUCCESS,\n      data: {\n        list: articles,\n        pagination: { prev, next }\n      }\n    }\n  } else {\n    ctx.status = 200\n    ctx.body = { code: CODE.FAILED }\n  }\n}\n\nfunction articleParser (content) {\n  const data = {}\n  const splits = content.split('\\r\\n')\n  const thumb = splits[0]\n  let cap = imageReg.exec(thumb)\n  if (cap) {\n    data.thumb = cap[2]\n    data.content = content.split(thumb)[1]\n  } else {\n    data.content = content\n  }\n  return data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/regenerator/index.js\n// module id = 10\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 12\n// module chunks = 0","import Koa from 'koa'\nimport Router from 'koa-router'\nimport { Nuxt, Builder } from 'nuxt'\nimport routes from './routes'\n\nconst app = new Koa()\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || 3000\n\n// Import and Set Nuxt.js options\nlet config = require('../nuxt.config.js')\nconfig.dev = !(app.env === 'production')\n\n// Instantiate nuxt.js\nconst nuxt = new Nuxt(config)\n\n// Build in development\nif (config.dev) {\n  const builder = new Builder(nuxt)\n  builder.build().catch(e => {\n    console.error(e) // eslint-disable-line no-console\n    process.exit(1)\n  })\n}\n\napp.use((ctx, next) => {\n  if (ctx.url.includes('/api')) {\n    return next()\n  }\n  ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n  return new Promise((resolve, reject) => {\n    ctx.res.on('close', resolve)\n    ctx.res.on('finish', resolve)\n    nuxt.render(ctx.req, ctx.res, promise => {\n      // nuxt.render passes a rejected promise into callback on error.\n      promise.then(resolve).catch(reject)\n    })\n  })\n})\n\nconst router = new Router()\nroutes(router)\napp.use(router.routes(), router.allowedMethods())\n\napp.listen(port, host)\nconsole.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js"],"sourceRoot":""}